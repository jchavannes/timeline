{{ template "header.html" . }}

<div id="timelines-list"></div>

<script type="text/javascript">

    var $timeline = $("#timelines-list");

    //{{ range $eraId, $era := .Eras }}
    timeline("{{ $era.Name }}", "{{ $era.Label }}", [
        // {{ range $eventId, $event := $era.Events }}
        {
            id: "{{ counter }}",
            group: 0,
            content: "<b>{{ $event.Label }}</b> {{ $event.Name }}",
            title: "{{ $event.GetDate }}",
            start: "{{ $event.GetDate }}"
        },
        // {{ end }}
        // {{ range $periodId, $period := $era.Periods }}
        {
            id: "{{ counter }}",
            group: 1,
            content: "{{ $period.Name }}",
            title: "{{ $period.Name }}",
            start: "{{ $period.GetStart }}",
            end: "{{ $period.GetEnd }}",
            className: "period default"
        },
        // {{ end }}
    ], {
        start: "{{ $era.Window.GetStart }}",
        end: "{{ $era.Window.GetEnd }}"
    });
    //{{ end }}

    function timeline(eraName, eraLabel, eraData, window) {
        console.log("Name: " + eraName, ", Label: " + eraLabel);
        console.log(eraData);
        console.log(window);
        for (var i = 0; i < eraData.length; i++) {
            var event = eraData[i];
            if (event.group == 1) {
                $timeline.append("<hr/>");
                continue;
            }
            $timeline.append("<p>" + event.content + "</p>");
        }
    }

</script>


{{ template "footer.html" . }}
